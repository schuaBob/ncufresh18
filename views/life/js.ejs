<script>
    $('.navBtn').on('click', function(e){
        $('#sideNav').toggleClass('activeNav');
        e.preventDefault();
    });

    $(document).ready(function(){ 
        var ifHide = 1;
        $('.hide1').slideUp();
        $('.clk').click(function(){
            var id = $(this).attr("id"),
                sub_id = "#" + id + "_sub",
                sub_hr = "#" + id + "_hr";
            if(ifHide == 1){
                $(sub_id).slideDown();
                $(sub_id).addClass("show1");
                $(sub_id).removeClass("hide1");
                $(sub_hr).slideDown();
                $(sub_hr).addClass("show1");
                $(sub_hr).removeClass("hide1");
                ifHide = (ifHide + 1) % 2;
            }
            else{
                $(sub_id).slideUp();
                $(sub_id).addClass("hide1");
                $(sub_id).removeClass("show1");
                $(sub_hr).slideUp();
                $(sub_hr).addClass("hide1");
                $(sub_hr).removeClass("show1");
                ifHide = (ifHide + 1) % 2;
            }
        });
    });

    $('.showDetail').on('click', function(e){
        e.preventDefault();
        var info = this.id.split("_");
        $.ajax({
            url:    "showing",
            method: "POST",
            data:   {mainTitle: info[0], subTitle: info[1]},
            error: function(err){
                alert("Some error occur...");
            },
            success: function(data){
                todo(data);
            }
        });
        var todo = function(data){
            $('.slideshow_container').empty();
            $('.dot_container').empty();
            for(var i=0 ; i<data.length ; i++){
                $(".slideshow_container").append("<div class='mySlides'><img src='" + data[i].path + "'" + "class='picture'></div>");
                $('.dot_container').append("<p class='dot'></p>");
            }
        }
    });

    $('.bigTitle').on('change', function(e){
        e.preventDefault();
        var choose = this.value;
        $.ajax({
            url:    "changing",
            method: 'POST',
            data:   {mainTitle : choose},
            error: function(err){
                alert("Some error occur...");
            },
            success: function(data){
                todo(data);
            }
        });
        var todo = function(data){
            $('.smallTitle').empty();
            $('.smallTitle').append("<option value='default'>" + "請選擇" + "</option>")
            for(var i=0 ; i<data.length ; i++){
                $('.smallTitle').append("<option value="+ data[i] + ">" +  data[i] + "</option>")
            }
        }
    });

    var ramSlideNum = 1;
    
    function plusSlides(n) {
        showSlides(ramSlideNum += n);
    }

    function showSlides(n) {
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        if (n > slides.length) {ramSlideNum = 1}
        if (n < 1) {ramSlideNum = slides.length}
        for (var i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (var i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[ramSlideNum-1].style.display = "block";
        dots[ramSlideNum-1].className += " active";
    }
</script>