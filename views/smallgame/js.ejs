<script>
// array æ‰“äº‚é †åº
Array.prototype.shuffle = function() {
    var array = this;
    var m = array.length,
        t, i;
    while (m) {
        i = Math.floor(Math.random() * m--);
        t = array[m];
        array[m] = array[i];
        array[i] = t;
    }
    return array;
};

// string æ’å…¥
String.prototype.insert = function (index, string) {
    if (index > 0)
        return this.substring(0, index) + string + this.substring(index, this.length);
    else
        return string + this;
};

// button + text = labelButton
var LabelButton = function(rightOrWrong, game, x, y, key, label, callback, callbackContext, overFrame, outFrame, downFrame, upFrame) {
    Phaser.Button.call(this, game, x, y, key, callback, callbackContext, overFrame, outFrame, downFrame, upFrame)    
    this.style = {
        'font': '25px Noto Sans TC',
        'fill': 'white'
    }    
    this.rightOrWrong = false
    this.anchor.setTo(0.5, 0.5)    
    this.label = new Phaser.Text(game, 0, 0, label, this.style)    
    //puts the label in the center of the button    
    this.label.anchor.setTo(0.5, 0.5)    
    this.addChild(this.label)
    this.setLabel(label)
    //adds button to game
    game.add.existing(this)
    // return this
}
LabelButton.prototype = Object.create(Phaser.Button.prototype)
LabelButton.prototype.constructor = LabelButton
LabelButton.prototype.setLabel = function(label) {
    this.label.setText(label)
}
LabelButton.prototype.setRightOrWrong = function(rightOrWrong) {
    this.rightOrWrong = rightOrWrong
}

var LabelSprite = function(game, x, y, key, frame) {
    Phaser.Sprite.call(this, game, x, y, key, frame)
    this.anchor.setTo(0.5, 0.5)
    this.label = new Phaser.Text(game, 0, 0)    
    this.label.anchor.setTo(0.5)    
    this.label.setStyle({
        font: "30px Noto Sans TC",
        fill: "#ffffff", 
        wordWrap: true, 
        wordWrapWidth: this.width,
        align: "left"
    })
    // this.label.alignIn(this, Phaser.CENTER)
    this.addChild(this.label)
    
    game.add.existing(this)
}
LabelSprite.prototype = Object.create(Phaser.Sprite.prototype)
LabelSprite.prototype.constructor = LabelSprite
LabelSprite.prototype.setLabel = function(label) {
    this.label.setText(label)
}
LabelSprite.prototype.setStyle = function (style) {
    this.label.setStyle(style)
}

// è¿”å›æŒ‰éˆ• event
function btnBackClick(item) {
    game.state.start('main')
}

// åˆ†å‰² str ç‚ºæ¯æ®µé•·åº¦ n çš„ string
function chunk(str, n) {
    var result = [];
    for(i = 0; i < str.length; i += n) {
        result.push(str.substr(i, n))
    }
    return result
};

// æ’å…¥ç©ºç™½ï¼Œè™•ç†ä¸­æ–‡æ›è¡Œ
function formatChinese(text, sprite) {
    var fontSize = text.fontSize
    var lineWidth = sprite.width
    var context = text.text
    var wrapWidth = Math.floor(lineWidth / fontSize)
    text.setText(chunk(context, wrapWidth).join(' '))
}

// éŠæˆ²é¡Œç›®
var quiz = [
    { q: 'ä¸­å¤®å¤§å­¸ä½åœ¨å“ªå€‹ç¸£å¸‚?', o: ['æ¡ƒåœ’å¸‚','ç«¹åŒ—å¸‚','å˜‰ç¾©å¸‚','å°ä¸­å¸‚'] , correctIndex:0},
    { q: 'ä¸­å¤®å¤§å­¸çš„ç°¡ç¨±ç‚º?', o: ['å¤®å¤§','ä¸­å¤®','ä¸­å¤§','ä»¥ä¸Šçš†é'] , correctIndex:2},
    { q: 'å¦‚æœæƒ³è¦æ­å…¬è»Šåˆ°å¸‚å€æ‡‰æ­å¹¾è™Ÿ?', o: ['1920','132','9025','321'] , correctIndex:1},
    { q: 'å¦‚æœæƒ³è¦æ­å…¬è»Šç›´é”å°åŒ—æ‡‰æ­å¹¾è™Ÿ?', o: ['132','1920','9025','133'] , correctIndex:2},
    { q: 'ç¾ä»»æ ¡é•·çš„åå­?', o: ['è”£å‰å¯§','å‘¨æ™¯æš','è”£ä¸­æ­£','æå››å…‰'] , correctIndex:1},
    { q: 'å†·æ°£å¡æ‡‰åˆ°å“ªçš„å…¨å®¶è²·?', o: ['ç”·9çš„å’Œå¥³14çš„','æ¾è‹‘çš„å’Œç”·9çš„','æ¾è‹‘çš„å’Œå¥³14çš„','ä»¥ä¸Šçš†æ˜¯'] , correctIndex:0},
    { q: 'åˆ°ç®¡é™¢çš„è·¯ä¸Šæœ‰ä¸€æ¢è·¯å«ç”šéº¼å·?', o: ['ç™¾èŠ±å·','é•·è°·å·','é’æœ¨å·','éƒ½ä¸å·'] , correctIndex:0},
    { q: 'è—æ–‡ä¸­å¿ƒåœ¨å“ª?', o: ['éŠè—é¤¨','ä¾ä»å ‚','é›»ç®—ä¸­å¿ƒ','èˆŠåœ–'] , correctIndex:3},
    { q: 'æ¾æœé¤å»³åœ¨ç”·å¹¾ä¸‹é¢?', o: ['ç”·9','ç”·11','ç”·13','ç”·7'] , correctIndex:3},
    { q: 'ç…§é¡§æµæµªçŠ¬çš„ç¤¾åœ˜ç‚º?', o: ['ä¸­å¤§æ„›ç‹—ç¤¾','ä¸­å¤§æ±ªæ±ªç¤¾','ä¸­å¤§ç‹—ç‹—ç¤¾','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'ä½•è€…ç‚ºå¤§ä¸€å¿…ä¿®èª²ç¨‹?', o: ['æ—¥æ–‡','æ³•æ–‡','åœ‹æ–‡','è¥¿ç­ç‰™æ–‡'] , correctIndex:2},
    { q: '132å…¬è»Šå–®ç¨‹ç¥¨åƒ¹ç‚ºä½•?', o: ['15','17','18','19'] , correctIndex:2},
    { q: 'å…¬ç”¨è…³è¸è»Šå«ç”šéº¼?', o: ['å°ç™½','å°é»‘','å°é»ƒ','å°ç¶ '] , correctIndex:3},
    { q: 'å¤§ä¸€å¿…ä¿®é«”è‚²ä½”å¹¾å­¸åˆ†?', o: ['0','2','3','1'] , correctIndex:0},
    { q: 'è«‹å•ä¸­å¤®å¤§å­¸æ²’æœ‰é–‹è¨­å“ªä¸€å ‚èªæ–‡èª²?', o: ['è¥¿ç­ç‰™æ–‡','ä¿„æ–‡','æ³•æ–‡','å¾·æ–‡'] , correctIndex:1},
    { q: 'è«‹å•ä¸­å¤®å¤§å­¸æœ‰é–‹è¨­å“ªä¸€å ‚èªæ–‡èª²?', o: ['å¾·æ–‡','ä¿„æ–‡','ç¾©å¤§åˆ©æ–‡','é¦¬ä¾†æ–‡ '] , correctIndex:0},
    { q: 'ä¸­å¤®å¤§å­¸å“ªä¸€é …é‹å‹•æ²’æœ‰è¨­ç½®å®¤å…§å ´é¤¨?', o: ['æ’çƒ','ç±ƒçƒ','æ¡Œçƒ','ç¶²çƒ'] , correctIndex:3},
    { q: 'ä¸­å¤®å¤§å­¸çš„å°ˆæ¥­å¯¦é©—åŠ‡å ´-é»‘ç›’å­ï¼Œä½æ–¼å“ªè£¡?', o: ['å¿—å¸Œé¤¨','äººæ–‡ç¤¾æœƒç§‘å­¸å¤§æ¨“','å·¥ä¸€é¤¨','ç®¡ç†äºŒé¤¨'] , correctIndex:1},
    { q: 'ä¸­å¤®å¯ä»¥å›ºå®šä¸€æ®µæ™‚é–“æœƒæœ‰é›»å½±æ”¾æ˜ çš„åœ°æ–¹åœ¨å“ªè£¡?', o: ['107é›»å½±é™¢','108é›»å½±é™¢','106é›»å½±é™¢','105é›»å½±é™¢'] , correctIndex:0},
    { q: 'è‹¥æŒä¸­å¤§è­‰ä»¶åˆ°æ ¡å…§çš„å°æœ¨å±‹é¬†é¤…é»é¤ï¼Œå¯æ‰“å¹¾æŠ˜?', o: ['10æŠ˜','7æŠ˜','5æŠ˜','9æŠ˜'] , correctIndex:3},
    { q: 'æ“å ´è·‘é“çš„é¡è‰²ç‚ºä½•?', o: ['è—è‰²','ç´…è‰²','é»ƒè‰²','ç™½è‰²'] , correctIndex:0},
    { q: 'å¥³ç”Ÿå®¿èˆæœ€è²´çš„ç‚ºå“ªæ£Ÿ?', o: ['å¥³4','å¥³14','å¥³1','å¥³2'] , correctIndex:1},
    { q: 'ä¸­å¤®å¤§å­¸çš„åœ°å€?', o: ['ä¸­å¤®è·¯300è™Ÿ','å­¸å¤®è·¯300è™Ÿ','ä¸­å¤§è·¯300è™Ÿ','ä»¥ä¸Šçš†é'] , correctIndex:2},
    { q: 'å¹¾è™Ÿå…¬è»Šå¯ä»¥ç›´é”æ¡ƒåœ’é«˜éµç«™?', o: ['133','154','178','172'] , correctIndex:3},
    { q: 'å°æœ¨å±‹å¾Œé¢æ˜¯ç”šéº¼å­¸é™¢?', o: ['ç®¡å­¸é™¢','æ–‡å­¸é™¢','ç†å­¸é™¢','å·¥å­¸é™¢'] , correctIndex:0},
    { q: 'å­¸æ ¡æœ‰é›•å¡‘å¤§å¸«æœ±éŠ˜çš„ä½œå“å—?', o: ['æ²’æœ‰','æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'ç”·ä¹å‰é¢çš„å™´æ°´æ± æ˜¯å«?', o: ['é¯‰é­šæ± ','è“®èŠ±æ± ','çƒé¾œæ± ','æ´—æ¾¡æ± '] , correctIndex:2},
    { q: 'Kæ›¸ä¸­å¿ƒåœ¨å“ª?', o: ['åœ‹é¼å¤§æ¨“','è¡Œæ”¿å¤§æ¨“','ç®¡ç†äºŒé¤¨','èˆŠåœ–'] , correctIndex:3},
    { q: 'éæ¸¸æ³³èª²æ™‚é–“å»æ¸¸æ³³è¦ä»˜?', o: ['30','40','50','60'] , correctIndex:0},
    { q: 'éç¾½çƒèª²æ™‚é–“å»æ‰“ç¾½çƒè¦ä»˜?', o: ['30','40','50','60'] , correctIndex:0},
    { q: 'å­¸æ ¡ä¸»è¦çš„æ ¡é¢¨ç‚º?', o: ['ç©æ¥µ','èª æ¨¸','æ´»æ½‘','æœæ°£'] , correctIndex:1},
    { q: 'å­¸æ ¡æœ‰é†«å­¸é™¢å—?', o: ['æœ‰','ä»¥å‰æœ‰','æ²’æœ‰','ä»¥ä¸Šçš†æ˜¯'] , correctIndex:2},
    { q: 'æœ¬æ ¡éš¸å±¬å“ªå€‹ç³»çµ±?', o: ['å°å¤§è¯ç›Ÿ','ä¸­è¯å¤§','å¤®è¯å¤§','å°è¯å¤§'] , correctIndex:3},
    { q: 'æ­å°è¯å¤§çš„å°ˆè»Šå»æ¸…å¤§è¦éŒ¢å—?', o: ['è¦','ä¸ç”¨','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'æ­å°è¯å¤§çš„å°ˆè»Šå»äº¤å¤§è¦éŒ¢å—? ', o: ['ä¸ç”¨','è¦','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:0},
    { q: 'æ­å°è¯å¤§çš„å°ˆè»Šå»é™½æ˜è¦éŒ¢å—? ', o: ['è¦','ä¸ç”¨','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'ä¸­å¤§åœ¨å¾©æ ¡å‰æ‰€åœ¨ä½ç½®ç‚º? ', o: ['å±±æ±','é™è¥¿','å—äº¬','é¼åŒ—'] , correctIndex:2},
    { q: 'å‡Œæ™¨3é»æœ‰é–‹çš„æ—©é¤åº—ç‚º?', o: ['èŠå§†æ€','é”å•µå»šæˆ¿','å“ˆå ¡å ¡','æƒŸå®¢'] , correctIndex:3},
    { q: 'æ ¡å…§æœ‰7-11å—?', o: ['æœ‰','æ²’æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'ä¸­å¤®å¤§å­¸éƒµå±€åœ¨?', o: ['ç”·11æ—','å¥³14æ—','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:2},
    { q: 'æƒ³è²·äºŒæ‰‹æ•™ç§‘æ›¸å¯åˆ°?', o: ['æ•¦ç…Œæ›¸å±€','å…¨å®¶è¶…å•†','581ç”Ÿæ´»é¤¨','é¾èª å½±å°åº—'] , correctIndex:0},
    { q: 'å­¸æ ¡å“ªè²·çš„åˆ°åºŠå¢Š? ', o: ['å…¨å®¶è¶…å•†','581ç”Ÿæ´»é¤¨','7-11','OKä¾¿åˆ©è¶…å•†'] , correctIndex:1},
    { q: 'é¸èª²è¦ä¸Šå“ªå€‹ç¶²ç«™?', o: ['portalé¸èª²ç³»çµ±','lms','ä¸­å¤®è³‡ç®¡','ä¸­å¤®è³‡å·¥'] , correctIndex:0},
    { q: 'å­¸æ ¡ç´„æœ‰å¹¾å€‹å§Šå¦¹æ ¡?', o: ['70','80','100','170'] , correctIndex:3},
    { q: 'è²·ä¸€å¼µå†·æ°£å¡è£¡é¢æœ‰å¤šå°‘éŒ¢?', o: ['250','500','150','200'] , correctIndex:1},
    { q: 'å­¸æ ¡å“ªè£æœ‰ubike?', o: ['è§€æ™¯å°æ—','ä¸­å¤§é–€å£','ç¸½åœ–æ›¸é¤¨å‰','å°æœ¨å±‹æ—'] , correctIndex:2},
    { q: 'Ubikeå‰å¹¾åˆ†é˜ä¸ç”¨éŒ¢?', o: ['30','60','90','ä¸€å®šè¦éŒ¢'] , correctIndex:0},
    { q: 'æˆ‘å€‘å¯æŒä¸­å¤§åœ–æ›¸è­‰åˆ°æ¸…å¤§å€Ÿæ›¸å—?', o: ['å¯ä»¥','ä¸å¯ä»¥','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:0},
    { q: 'æˆ‘å€‘å¯æŒä¸­å¤§åœ–æ›¸è­‰åˆ°äº¤å¤§å€Ÿæ›¸å—?', o: ['ä¸å¯ä»¥','å¯ä»¥','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'æˆ‘å€‘å¯æŒä¸­å¤§åœ–æ›¸è­‰åˆ°é™½æ˜å€Ÿæ›¸å—?', o: ['å¯ä»¥','ä¸å¯ä»¥','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:0},
    { q: 'åœ–æ›¸é¤¨å¹³æ—¥å¹¾é»é–‹é¤¨?', o: ['8am','9am','10am','11am'] , correctIndex:0},
    { q: 'åœ–æ›¸é¤¨å‡æ—¥å¹¾é»é–‹é¤¨?', o: ['9am','8am','10am','11am'] , correctIndex:2},
    { q: 'åœ–æ›¸é¤¨å­¸æœŸä¸­å¹³æ—¥å¹¾é»é–‰é¤¨?', o: ['9:30pm','10pm','11pm','12pm'] , correctIndex:1},
    { q: 'åœ–æ›¸é¤¨å‡æ—¥å¹¾é»é–‰é¤¨?', o: ['6pm','7pm','9pm','10pm'] , correctIndex:1},
    { q: 'åœ–æ›¸é¤¨æ›¸æœ€å¤šå¯ä»¥å€Ÿå¹¾æœ¬?', o: ['5','6','10','20'] , correctIndex:3},
    { q: 'æ ¡å…§å·¥è®€å“ªå€‹ç¶²ç«™å¯ä»¥æ‰¾åˆ°?', o: ['lms','ä¸­å¤®è³‡ç®¡ç¶²é ','portalçåŠ©å­¸é‡‘æš¨å·¥è®€ç®¡ç†ç³»çµ±','ä¸­å¤®è³‡å·¥ç¶²é '] , correctIndex:2},
    { q: 'é€šè­˜èª²ç¨‹åœ¨ç•¢æ¥­å‰æ‡‰ä¿®æ»¿å¹¾å­¸åˆ†?', o: ['18','20','15','14'] , correctIndex:3},
    { q: 'å…¨æ ¡æœ‰å¹¾å€‹å­¸ç³»?', o: ['22','33','44','55'] , correctIndex:0},
    { q: 'å­¸ç”Ÿå°ˆç”¨ä¿¡ç®±web mailæ˜¯ç”±å“ªå€‹å–®ä½è² è²¬ç®¡ç†çš„?', o: ['åœ–æ›¸é¤¨','é›»å­è¨ˆç®—ä¸­å¿ƒ','æ•™å‹™è™•','å­¸å‹™è™•'] , correctIndex:1},
    { q: 'ä¸­å¤®å¤§å­¸èªè¨€ä¸­å¿ƒä½åœ¨å“ªä¸€æ£Ÿå¤§æ¨“?', o: ['å¿—å¸Œé¤¨','åœ°ç§‘é™¢','ç¶œæ•™é¤¨','ç®¡ç†äºŒé¤¨'] , correctIndex:2},
    { q: 'ä¸­å¤®å¤§å­¸å®¿èˆç¶²è·¯å–®æ—¥(24å°æ™‚)æ ¡å¤–çš„ä¸Šå‚³æµé‡ã€åŠ ç¸½ã€ä¹‹å¾Œä¸Šé™ç‚º?', o: ['æ²’é™åˆ¶','3GB','4GB','5GB'] , correctIndex:1},
    { q: 'ä¸­å¤®å¤§å­¸å®¿èˆç¶²è·¯å–®æ—¥(24å°æ™‚)æ ¡å¤–çš„ä¸‹è¼‰æµé‡ã€åŠ ç¸½ã€ä¹‹å¾Œä¸Šé™ç‚º?', o: ['æ²’é™åˆ¶','3GB','4GB','5GB'] , correctIndex:0},
    { q: 'å¦‚æœè…³è¸è»Šå£äº†è¦å»å“ªä¿®?', o: ['æ‰¾è­¦è¡›ä¼¯ä¼¯','å…¨å®¶','å®¶æ¨‚ç¦','å¾Œé–€è…³è¸è»Šåº—'] , correctIndex:3},
    { q: 'ä¸­å¤®å¤§å­¸çš„è‹±æ–‡ç¸®å¯«ç‚º?', o: ['NCU','HGSH','CYGSH','CYSH'] , correctIndex:0},
    { q: 'éƒµå±€å¹³æ—¥ç‡Ÿæ¥­æ™‚é–“ç‚º?', o: ['9:00~18:00','8:00~17:00','10:00~17:00','9:00~18:00'] , correctIndex:1},
    { q: 'è‹¥æœ‰äººå¯„ä¿¡çµ¦ä½ ,ä½ è©²åˆ°è¡Œæ”¿å¤§æ¨“çš„å“ªé ˜?', o: ['å‡ºç´çµ„','èª²å‹™çµ„','æ–‡æ›¸çµ„','ç”Ÿæ´»è¼”å°çµ„'] , correctIndex:2},
    { q: 'å¾Œé–€çš„7-11å«ç”šéº¼é–€å¸‚?', o: ['å­¸åº—é–€å¸‚','ä¸­å¤®é–€å¸‚','ä¸­å¤§é–€å¸‚','å­¸å¤®é–€å¸‚'] , correctIndex:3},
    { q: 'åœ‹é¼åœ–æ›¸é¤¨æ˜¯ç‚ºäº†ç´€å¿µå“ªä½æ ¡å‹?', o: ['æåœ‹é¼','å³åœ‹é¼','é™³åœ‹é¼','ç‹åœ‹é¼'] , correctIndex:0},
    { q: 'ä¸­å¤®å¤§å­¸çš„æ ¡æ¨¹ç‚º?', o: ['ç«¹','æ¾','æ¢…','è·'] , correctIndex:1},
    { q: 'ä¸‹åˆ—å“ªå€‹å¶åƒåŠ‡æœ‰åœ¨ä¸­å¤®å–æ™¯?', o: ['æ„›çš„3.14159','ä¸‰æ˜æ²»å¥³å­©çš„é€†è¥²','æˆ‘çš„è‡ªç”±å¹´ä»£','äººéš›é—œä¿‚äº‹å‹™æ‰€'] , correctIndex:2},
    { q: 'æ ¡å…§æ²’æœ‰ä½•ç¨®é‹å‹•å ´åœ°?', o: ['é‡è¨“å®¤','å£˜çƒå ´','ç±ƒçƒå ´','ä¿é½¡çƒé¤¨'] , correctIndex:3},
    { q: 'æ ¡å…§æ²’æœ‰ä½•ç¨®é‹å‹•å ´åœ°?', o: ['é«˜çˆ¾å¤«çƒå ´','æ’çƒå ´','å£˜çƒå ´','ç±ƒçƒå ´'] , correctIndex:0},
    { q: 'æ ¡å…§æœ‰ä½•ç¨®é‹å‹•å ´åœ°?', o: ['é«˜çˆ¾å¤«çƒå ´','é‡è¨“å®¤','æ»‘é›ªå ´','ä¿é½¡çƒé¤¨'] , correctIndex:1},
    { q: 'ä¸‹åˆ—ä½•è€…ç‚ºä¸­å¤®å¤§å­¸çš„é«”è‚²é¤¨åå­—?', o: ['æ“šå¾·æ¨“','æ¸¸è—é¤¨','ä¾ä»å ‚','å¿—é“æ¨“'] , correctIndex:2},
    { q: 'æ ¡å…§æœ‰å€‹è‘—åçš„åŠ‡å ´å«?', o: ['ååŠ‡å ´','107é›»å½±é™¢','ä¸­å¤®åŠ‡å ´','é»‘ç›’å­åŠ‡å ´'] , correctIndex:3},
    { q: 'è‹¥é‡åˆ°äººç”Ÿä½æ½®è©²å»å“ªå°‹æ±‚å”åŠ©?', o: ['è«®å•†ä¸­å¿ƒ','æ ¡é•·å®¤','æ•™å‹™è™•','å­¸å‹™è™•'] , correctIndex:0},
    { q: 'ä¸­å¤®å¤§å­¸æ ¡å…§å“ªè£¡æœ‰æ’çƒå ´?', o: ['ä¸­å¤§æ¹–æ—','ä¾ä»å ‚æ—','èˆŠåœ–æ—','ç¸½åœ–æ›¸é¤¨æ—'] , correctIndex:1},
    { q: 'ä½ ç¾åœ¨å¿µå“ªæ‰€å¤§å­¸?', o: ['ä¸­å±±','ä¸­èˆˆ','ä¸­å¤®','ä¸­æ­£'] , correctIndex:2},
    { q: 'ä¸­å¤®çš„åƒåœ¾å ´åœ¨?', o: ['ä¸­å¤§æ¹–å¾Œé¢','æ–‡é™¢æ—é‚Š','ç±ƒçƒå ´æ—','ç”·9å¾Œé¢'] , correctIndex:3},
    { q: 'ä¸­å¤®å¤§å­¸é™¤äº†å“ªå…©å¤©ä»¥å¤–éƒ½æœ‰åƒåœ¾è»Šæ™‚é–“?', o: ['å…­æ—¥','ä¸€äºŒ','æ—¥ä¸€','äº”å…­'] , correctIndex:0},
    { q: 'å‡Œæ™¨æƒ³åƒå®µå¤œæœ€é©åˆåˆ°å“ªåƒ?', o: ['å¾Œé–€','å®µå¤œè¡—','å¥³å®¿','ç”·å®¿'] , correctIndex:1},
    { q: 'ä¸­å¤®æœ€æ–°æˆç«‹çš„å­¸é™¢ç‚º?', o: ['ç†å­¸é™¢','ç®¡ç†å­¸é™¢','ç”Ÿé†«ç†å·¥å­¸é™¢','è³‡é›»å­¸é™¢'] , correctIndex:2},
    { q: 'ä¸­å¤®å­¸ç”Ÿè‡ªå·±å°ˆå±¬çš„å­¸æ ¡ä¿¡ç®±çµå°¾ç‚ºä½•?', o: ['@cc.ncu.edu.tw','@cc.ntu.edu.tw','@cc.cygsh.edu.tw','@cc.cysh.edu.tw'] , correctIndex:0},
    { q: 'æœŸä¸­æœŸæœ«è€ƒæ™‚kæ›¸ä¸­å¿ƒæœƒé–‹åˆ°ä»€éº¼æ™‚å€™?', o: ['22é»é—œ','23é»é—œ','21é»é—œ','24å°æ™‚é–‹æ”¾'] , correctIndex:3},
    { q: 'å¹³æ™‚kæ›¸ä¸­å¿ƒæœƒé–‹åˆ°ä»€éº¼æ™‚å€™?', o: ['24å°æ™‚é–‹æ”¾','23é»é—œ','22é»é—œ','21é»é—œ'] , correctIndex:1},
    { q: 'è«‹å•107å­¸å¹´åº¦ï¼Œä¸­å¤®å¤§å­¸çš„æ–°ç”ŸFBç¤¾åœ˜åç¨±ç‚ºä½•?', o: ['2018 ç«™åœ¨å¤¢æƒ³çš„ä¸­å¤®ğŸ¿ï¸','2018 å¶„ï¼æœ› ä¸­å¤®å¤§å­¸','2018é‚‚é€…ä¸­å¤®','NCU TALKè‡‰æ›¸ç‰ˆ'] , correctIndex:0},
    { q: 'ä¸­å¤®ç”šéº¼æ¨¹æœ€å¤š?', o: ['æ¦•æ¨¹','æ¾æ¨¹','èŠ’æœæ¨¹','è¥¿ç“œæ¨¹'] , correctIndex:1},
    { q: 'ä¸­å¤®ç›®å‰æœ‰å¹¾å€‹å­¸é™¢?', o: ['8','10','12','14'] , correctIndex:0},
    { q: 'è«‹å•ä¸­å¤®å¤§å­¸çš„æ ¡è‰²ç‚ºä»€éº¼é¡è‰²?', o: ['ç´…ç¶ ','è—ç´«','ç´«é‡‘','é›ç´…'] , correctIndex:2},
    { q: 'ä¸­å¤®å¤§å­¸å…§æœ‰å¹¾å®¶å…¨å®¶?', o: ['3','5','7','2'] , correctIndex:0},
    { q: 'ä¸­å¤®å¤§å­¸å…§æœ€é«˜å»ºç¯‰ç‚ºå“ªæ£Ÿ?', o: ['å®¢å®¶å­¸é™¢','ç®¡ç†äºŒé¤¨','èˆŠåœ–','å¥³14'] , correctIndex:3},
    { q: 'ä¸­å¤®å¤§å­¸çš„ç¸½åœ–æ›¸é¤¨ç¸½å…±æœ‰å¹¾å±¤æ¨“?', o: ['8','9','10','11'] , correctIndex:0},
    { q: 'ä½ å³å°‡é€²å…¥çš„åœ‹ç«‹ä¸­å¤®å¤§å­¸æ–¼ä»Šå¹´æ»¿å¹¾é€±å¹´äº†å‘¢?', o: ['102','103','100','99'] , correctIndex:1},
    { q: 'ä¸­å¤®å¤§å­¸å“ªè£¡æœ‰æ ¡å…§çš„è…³è¸è»Šæ‰“æ°£ç«™?', o: ['å°æœ¨å±‹æ—','èˆŠåœ–æ—','æ­£é–€è­¦è¡›å®¤','ç¸½åœ–æ›¸é¤¨æ—'] , correctIndex:2},
    { q: 'å­¸ç”Ÿæ©Ÿè»Šç”³è«‹é¨å…¥æ ¡åœ’ä¹‹å…¥æ ¡æ™‚é–“é™åˆ¶ç‚º?', o: ['12~18æ™‚','11~23æ™‚','10~23æ™‚','8~21æ™‚'] , correctIndex:3},
    { q: 'å®¿èˆç¶²è·¯å•Ÿå‹•ç¢¼åƒ¹éŒ¢è¦èŠ±å¤šå°‘éŒ¢?', o: ['800','1500','1000','1200'] , correctIndex:0},
    { q: 'è«‹å•ä¸­å¤®å¤§å­¸é“è·¯çš„æœ€é«˜é™é€Ÿæ˜¯å¤šå°‘å…¬é‡Œ?', o: ['5','10','15','25'] , correctIndex:3},
    { q: 'å®¿èˆç¶²è·¯å¡éœ€è¦åˆ°è¡Œæ”¿å¤§æ¨“ä¸­çš„å“ªå€‹è™•å®¤è²·?', o: ['æ–‡æ›¸çµ„','å‡ºç´çµ„','è¨»å†Šçµ„','èª²å‹™çµ„'] , correctIndex:1},
    { q: 'å“ªå€‹å®¿èˆæœ‰æ¡Œçƒå®¤?', o: ['å¥³2','å¥³4','ç”·9','å¥³1'] , correctIndex:2},
    { q: 'è‹¥è¦ç”³è«‹å¯’å‡å®¿èˆè¦åˆ°å“ªç”³è«‹?', o: ['ç³»è¾¦','è¡Œæ”¿å¤§æ¨“','å¥³å®¿å‚³é”å®¤','å®¿èˆæœå‹™ä¸­å¿ƒ'] , correctIndex:3},
    { q: 'å®¿èˆé–€ç¦ç‚º?', o: ['12pm','æ²’é–€ç¦','11pm','10pm'] , correctIndex:1},
    { q: 'å“ªé–“å®¿èˆåœ°ä¸‹å®¤æœ‰é¤å»³ã€581å•†åº—ã€å…¨å®¶ã€å½±å°åº—ç­‰ç­‰?', o: ['å¥³1','å¥³14','ç”·9','ç”·7'] , correctIndex:1},
    { q: 'çŸ¥åä½œå®¶å³æ˜ç›Šç•¢æ¥­æ–¼ä¸­å¤®å“ªå€‹ç§‘ç³»?', o: ['åœ°ç§‘ç³»','è³‡ç®¡ç³»','ä¸­æ–‡ç³»','å®¢å®¶ç³»'] , correctIndex:2},
    { q: 'çŸ¥åå¥³æ¼”å“¡å¼µéˆç”¯ç•¢æ¥­æ–¼ä¸­å¤®å“ªå€‹ç ”ç©¶æ‰€?', o: ['å®¢ç ”æ‰€ç¢©å£«','è³‡ç®¡æ‰€ç¢©å£«','EMBA ç¢©å£«','ç”¢ç¶“æ‰€ç¢©å£«'] , correctIndex:3},
    { q: 'çŸ¥åç”·æ¼”å“¡ç‹å®¥å‹ç•¢æ¥­æ–¼ä¸­å¤®å“ªå€‹ç§‘ç³»?', o: ['è²¡ç¶“ç³»','ä¸­æ–‡ç³»','å¤§æ°£ç³»','è³‡å·¥ç³»'] , correctIndex:0},
    { q: 'çŸ¥åè—äººæµ©è§’ç¿”èµ·çš„æµ©å­ç•¢æ¥­æ–¼ä¸­å¤®å“ªå€‹ç§‘ç³»?', o: ['é›»æ©Ÿç³»','è³‡ç®¡ç³»','åŒ–æç³»','è³‡å·¥ç³»'] , correctIndex:1},
    { q: 'æ ¡æ­Œä¸­ â€å®æˆ‘é»Œèˆå…®â€çš„â€é»Œâ€å­—è®€åš?', o: ['ã„©Ë‹','ã„ã„¨ã„¤ËŠ','ã„ã„¨ã„¥ËŠ','ã„ã„ Ë‹'] , correctIndex:2},
    { q: 'ä¸­å¤®å¤§å­¸æ²’æœ‰ç”šéº¼å‹æœƒ?', o: ['é›²å˜‰æœƒ','ä¸­æŠ•æœƒ','åƒ‘å‹æœƒ','åŒ—å‹æœƒ'] , correctIndex:3},
    { q: 'å¦‚æœä¸æœƒç”¨å®¿ç¶²å¯ä»¥å»å“ªå€‹ç¶²ç«™æŸ¥è©¢?', o: ['ä¸­å¤®é›»å­è¨ˆç®—ä¸­å¿ƒ','lms','æœå‹™å­¸ç¿’ç¶²','ç”Ÿæ´»è·æ¶¯ç¶²'] , correctIndex:0},
    { q: 'ä¸­å¤®å“ªå€‹ç¶²ç«™æœ‰æä¾›Microsoft Officeçš„ä¸‹è¼‰æœå‹™?', o: ['ç”Ÿæ´»è·æ¶¯ç¶²','ä¸­å¤®é›»å­è¨ˆç®—ä¸­å¿ƒ','æœå‹™å­¸ç¿’ç¶²','lms'] , correctIndex:1},
    { q: 'ä¸­å¤®å“ªå€‹ç¶²ç«™æœ‰æä¾›é˜²æ¯’è»Ÿé«”çš„ä¸‹è¼‰æœå‹™?', o: ['ç”Ÿæ´»è·æ¶¯ç¶²','æœå‹™å­¸ç¿’ç¶²','ä¸­å¤®é›»å­è¨ˆç®—ä¸­å¿ƒ','ç”Ÿæ´»è·æ¶¯ç¶²'] , correctIndex:2},
    { q: 'ç§‘å­¸å››é¤¨åˆåç”šéº¼?', o: ['åœ‹é¼å¤§æ¨“','ä¾ä»å ‚','æ¸¸è—é¤¨','å¥é›„é¤¨'] , correctIndex:3},
    { q: 'å¥é›„é¤¨æ˜¯ç‚ºäº†ç´€å¿µèª°?', o: ['å³å¥é›„','å®‹å¥é›„','ç‹å¥é›„','é»ƒå¥é›„'] , correctIndex:0},
    { q: 'ä½æ–¼é˜¿é‡Œå±±æµ·æ‹”2862mçš„é¹¿æ—å¤©æ–‡å°ç”±æœ¬æ ¡å“ªå€‹æ‰€æ‰€ç®¡ç†?', o: ['åœ°è³ªæ‰€','å¤©æ–‡æ‰€','ç”Ÿé†«æ‰€','è³‡ç®¡æ‰€'] , correctIndex:1},
    { q: 'å­¸æ ¡å“ªè£¡æœ‰å¤©æ–‡å°?', o: ['ç†å­¸é™¢','ç®¡é™¢','ç§‘å­¸å››é¤¨','å·¥å­¸é™¢'] , correctIndex:2},
    { q: 'å°æœ¨å±‹é¬†é¤…çš„é¬†é¤…æœ‰è³£å†°æ·‡æ·‹å£å‘³çš„é¬†é¤…å—?', o: ['æœ‰','æ²’æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:0},
    { q: 'å°æœ¨å±‹é¬†é¤…æœ‰è³£é£²æ–™å—?', o: ['æ²’æœ‰','æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'å¥³14æ¨“ä¸‹çš„å…¨å®¶æœ‰è‡ªå‹•ææ¬¾æ©Ÿå—?', o: ['æœ‰','æ²’æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'Fbæœ‰å€‹ç¤¾åœ˜å¯ä»¥æä¾›ä¸­å¤®çš„å­¸ç”Ÿè²·è³£äºŒæ‰‹ç‰©å“,è©²ç¤¾åœ˜å«?', o: ['ä¸­å¤®çœéŒ¢ç¦åˆ©ç¤¾','ä¸­å¤®å¾©æ´»è²·è³£ç¤¾','ä¸­å¤®å¾©æ´»ç¦åˆ©ç¤¾','ä¸­å¤®æœ‰éŒ¢è²·è³£ç¤¾'] , correctIndex:2},
    { q: 'ä¸­å¤®äº¤æµé¸èª²è³‡è¨Šçš„fbç¤¾åœ˜å«?', o: ['ä¸­å¤§é¸èª²è®šè®šè®š','ä¸­å¤§é¸èª²~Alt+F4å¾ˆEAZY!!!','ä¸­å¤§é¸èª²~Ctrl+F4å¾ˆEAZY!!!','ä¸­å¤§é¸èª²~Ctrl+Få¾ˆEAZY!!!',] , correctIndex:3},
    { q: 'ä¸­å¤®æœ‰è¨­è‹±æ–‡ç•¢æ¥­é–€æª»å—?', o: ['æœ‰','æ²’æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:0},
    { q: 'ä¸­å¤®æœ‰è¨­ä¸­æ–‡ç•¢æ¥­é–€æª»å—?', o: ['æœ‰','æ²’æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'ä¸­å¤®æœ‰è¨­æ•¸å­¸ç•¢æ¥­é–€æª»å—?', o: ['æœ‰','æ²’æœ‰','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'æ¯å€‹å­¸é™¢çš„ç•¢æ¥­è‹±æ–‡ç•¢æ¥­é–€æª»ç›¸åŒå—?', o: ['ä¸åŒ','ç›¸åŒ','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:0},
    { q: 'ä½ ç¾åœ¨æ­£åœ¨ä½¿ç”¨çš„ç¶²ç«™æ˜¯ç”±æœ¬æ ¡å“ªå€‹åœ˜éšŠæ‰€æ¶çš„?', o: ['æ–°ç”Ÿè³‡è¨Šç¶²','æ–°ç”ŸçŸ¥è¨“ç¶²','æ–°ç”ŸçŸ¥è¨Šç¶²','æ–°è²çŸ¥è¨Šç¶²'] , correctIndex:2},
    { q: 'å­¸æ ¡å¾Œé–€é‚£é–“å¾ˆå„ªçš„å’–å•¡ç”œé»åº—å«?', o: ['Sidewalk','NO.17 White House','è¿·è·¯','Backdoor CafÃ©'] , correctIndex:3},
    { q: 'å­¸æ ¡å¾Œé–€é‚£é–“ç´ é£Ÿé¤å»³å«?', o: ['Sidewalk','Backdoor CafÃ©','NO.17 White House','è¿·è·¯'] , correctIndex:0},
    { q: 'å¦‚æœæƒ³åƒæ‰‹å·¥å†°æ·‡æ·‹å¯ä»¥åˆ°å“ªå®¶åº—?', o: ['å¥½å…‡è›‹é¤…','Sidewalk','Backdoor CafÃ©','NO.17 White House'] , correctIndex:1},
    { q: 'å¤å¤©æ™‚èµ°ç™¾èŠ±å·æ™‚æœ‰ä»€éº¼æœƒå¾æ¨¹ä¸Šæ‰ä¸‹ä¾†?', o: ['éŒ¢','é»ƒé‡‘','æ¯›æ¯›èŸ²','é­š'] , correctIndex:2},
    { q: 'å¤§ä¸€é€±æœƒè¦å»å“ªè½?', o: ['é´»ç¶“ç®¡','æ¸¸è—é¤¨','ç®¡ç†äºŒé¤¨','å¤§è¬›å ‚'] , correctIndex:3},
    { q: 'å¤§ä¸€å­¸ç”Ÿå¿…é ˆè½å¹¾æ¬¡å¤§ä¸€é€±æœƒ?', o: ['4æ¬¡','3æ¬¡','2æ¬¡','1æ¬¡'] , correctIndex:0},
    { q: 'å¤§ä¸€å­¸ç”Ÿå¿…é ˆè½å¹¾æ¬¡é™¢é€±æœƒ?', o: ['1æ¬¡','2æ¬¡','3æ¬¡','4æ¬¡'] , correctIndex:1},
    { q: 'å¤§ä¸€é€±æœƒè¦å»å“ªå€‹ç¶²ç«™å ±å?', o: ['ç”Ÿæ´»è·æ¶¯ç¶²','æ–°ç”ŸçŸ¥è¨Šç¶²','å­¸å‹™è™•ç¶²ç«™','lms'] , correctIndex:2},
    { q: 'å­¸æ ¡æœ€å¤šçš„è¶…å•†æ˜¯å“ªå®¶?', o: ['7-11','OK','èŠçˆ¾å¯Œ','å…¨å®¶'] , correctIndex:3},
    { q: 'å­¸æ ¡çš„é‹å‹•æœƒç‚ºæœŸå¹¾å¤©?', o: ['1å¤©','2å¤©','3å¤©','4å¤©'] , correctIndex:1},
    { q: 'è‹¥å—å‚·äº†è©²å»å“ªè™•ç†?', o: ['ç”Ÿæ´»æœå‹™çµ„','ç”Ÿæ´»è¼”å°çµ„','è¡›ç”Ÿä¿å¥çµ„','å‡ºç´çµ„'] , correctIndex:2},
    { q: 'è·æ¶¯ç™¼å±•ä¸­å¿ƒä½åœ¨èˆŠåœ–å¹¾æ¨“?', o: ['2æ¨“','3æ¨“','4æ¨“','5æ¨“'] , correctIndex:0},
    { q: 'Kæ›¸ä¸­å¿ƒä½åœ¨èˆŠåœ–å¹¾æ¨“?', o: ['2æ¨“','3æ¨“','4æ¨“','5æ¨“'] , correctIndex:0},
    { q: 'æ‰¾ä¸åˆ°äººèŠå¿ƒäº‹çš„ä½ å¯ä»¥å‰å¾€?', o: ['æ ¡é•·å®¤','è¡Œæ”¿å¤§æ¨“','è­¦è¡›å®¤','è«®å•†è¼”å°ä¸­å¿ƒ'] , correctIndex:3},
    { q: 'å¤§ä¸€æ–°ç”Ÿå¿ƒç†é©æ‡‰åº§è«‡æœƒè¾¦åœ¨å¹¾æœˆ?', o: ['9æœˆ','10æœˆ','11æœˆ','12æœˆ'] , correctIndex:0},
    { q: 'ç ”ç©¶ç”Ÿæ–°ç”Ÿåº§è«‡è¾¦åœ¨å¹¾æœˆ?', o: ['9æœˆ','10æœˆ','11æœˆ','12æœˆ'] , correctIndex:0},
    { q: 'å®¿èˆä¸­ä½¿ç”¨ä¸€æ¬¡æ´—è¡£æ©Ÿé ˆæŠ•å¤šå°‘éŒ¢?', o: ['30å…ƒ','40å…ƒ','10å…ƒ','20å…ƒ'] , correctIndex:2},
    { q: 'å®¿èˆä¸­ä½¿ç”¨çƒ˜è¡£æ©Ÿ30åˆ†é˜é ˆæŠ•å¤šå°‘éŒ¢?', o: ['40å…ƒ','10å…ƒ','20å…ƒ','30å…ƒ'] , correctIndex:1},
    { q: 'å®¿èˆä¸­ä½¿ç”¨çƒ˜è¡£æ©Ÿä¸€æ¬¡æœ€å¤šå¯ä»¥æŠ•å…¥å¹¾å…ƒ?', o: ['20å…ƒ','30å…ƒ','40å…ƒ','50å…ƒ'] , correctIndex:1},
    { q: 'å®¿èˆä¸­ä½¿ç”¨è„«æ°´æ©Ÿéœ€æŠ•å¤šå°‘éŒ¢?', o: ['10å…ƒ','20å…ƒ','30å…ƒ','å…éŒ¢'] , correctIndex:3},
    { q: 'å¦‚æœæƒ³è¦å‡ºåœ‹äº¤æ›å¯ä»¥åˆ°å“ªè©¢å•?', o: ['è·æ¶¯ç™¼å±•ä¸­å¿ƒ','è¡›ç”Ÿä¿å¥çµ„','åœ‹éš›äº‹å‹™è™•','ç”Ÿæ´»æœå‹™çµ„'] , correctIndex:2},
    { q: 'å…¨æ ¡è·¯è·‘ç”·ç”Ÿéœ€è·‘å¹¾å…¬é‡Œ?', o: ['4.3km','5.3km','9.3km','10.3km'] , correctIndex:1},
    { q: 'å…¨æ ¡è·¯è·‘å¥³ç”Ÿéœ€è·‘å¹¾å…¬é‡Œ?', o: ['4km','6km','8km','9km'] , correctIndex:0},
    { q: 'ä¸­å¤®2006ç™¼ç¾çš„å°è¡Œæ˜Ÿæ–¼2016é€šéå¯©æŸ¥å‘½åç‚º?', o: ['ä¸­å¤®','å±ä¸­','ä¸­å±','å±æ±',] , correctIndex:3},
    { q: 'éŠè—é¤¨çš„ç”±ä¾†å‡ºè‡ªæ–¼ä¸‹åˆ—å“ªå¥è©±?', o: ['ä¸é éŠï¼ŒéŠå¿…æœ‰è—','ä¾æ–¼ä»ï¼ŒéŠæ–¼è—','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'å¿—é“æ¨“çš„ç”±ä¾†å‡ºè‡ªæ–¼ä¸‹åˆ—å“ªè£¡?', o: ['å­Ÿå­','ä¸­åº¸','è«–èª','å¤§å­¸'] , correctIndex:2},
    { q: 'æ“šå¾·æ¨“çš„ç”±ä¾†å‡ºè‡ªæ–¼ä¸‹åˆ—å“ªè£¡?', o: ['å­Ÿå­','ä¸­åº¸','å¤§å­¸','è«–èª'] , correctIndex:3},
    { q: 'ä¾ä»å ‚çš„ç”±ä¾†å‡ºè‡ªæ–¼ä¸‹åˆ—å“ªè£¡?', o: ['è«–èª','å­Ÿå­','ä¸­åº¸','å¤§å­¸'] , correctIndex:0},
    { q: 'ç›®å‰ä¸­å¤®å¤§å­¸æ ¡é•·æ˜¯èª°?', o: ['å‘¨ç’Ÿæš','å‘¨æ™¯æš','å‘¨æ™¯é™½','å‘¨æ™¯ç¿”'] , correctIndex:1},
    { q: 'æ›¾ç¶“æœ‰äººæ‰é€²ç™¾èŠ±å·å—?', o: ['æœ‰','æ²’æœ‰','ç›®å‰æ²’æœ‰','çœŸçš„æ²’æœ‰'] , correctIndex:0},
    { q: 'ä¸­å¤®è¢«äºŒä¸€å¹¾æ¬¡å°±æœƒè¢«é€€å­¸?', o: ['1æ¬¡','2æ¬¡','3æ¬¡','4æ¬¡'] , correctIndex:1},
    { q: 'å¹³å¸¸åœ¨æ ¡å…§å¯ä»¥é¨æ©Ÿè»Šå—?', o: ['å¯ä»¥','å¯ä»¥å§','æ‡‰è©²å¯ä»¥','ä¸è¡Œ'] , correctIndex:3},
    { q: 'æ ¡å…§å…¬ç”¨è…³è¸è»Šå¯ä»¥é¨å‡ºæ ¡å¤–å—?', o: ['å¯ä»¥','ä¸è¡Œ','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'å¥½å…‡è›‹é¤…å¹¾é»é–‹?', o: ['7pm','6pm','5pm','10pm'] , correctIndex:3},
    { q: 'å¥½å…‡è›‹é¤…å¹¾é»é—œé–€?', o: ['7am','8am','1pm','5am'] , correctIndex:2},
    { q: 'å¥½å…‡è›‹é¤…å¾å¹¾é»é–‹åˆ°å¹¾é»?', o: ['10pm~éš”å¤©1pm','7pm~éš”å¤©7am','6pm~éš”å¤©8am','5pm~éš”å¤©5am'] , correctIndex:0},
    { q: 'ä½ å–œæ­¡é€™å€‹ç¶²ç«™å—?', o: ['ä¸å–œæ­¡','å¾ˆå–œæ­¡','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'ä½ å–œæ­¡é€™æ¬¾éŠæˆ²å—?', o: ['å¾ˆå–œæ­¡','ä¸å–œæ­¡','å¤ªå–œæ­¡äº†','é‚„å¥½'] , correctIndex:2},
    { q: 'è¦è¼¸å…¥ç¶²è·¯å¡è™Ÿç¢¼éœ€è¦è‡³å“ªå€‹ç¶²é ?', o: ['æœå‹™å­¸ç¿’ç¶²','ç”Ÿæ´»è·æ¶¯ç¶²','ä¸­å¤®å¤§å­¸å­¸ç”Ÿå®¿èˆç¶²è·¯ç³»çµ±','lms'] , correctIndex:2},
    { q: 'å­¸ç”Ÿå®¿ç¶²ç³»çµ±çš„ä½¿ç”¨è€…å°ˆå€å…§ä¹‹ã€Œç¹³è²»ã€æœ€å¸¸ç”¨çš„æ–¹å¼ç‚º?', o: ['ç›´æ¥è‡³è¡Œæ”¿å¤§æ¨“å‡ºç´çµ„è³¼è²·','ATM ç¹³æ¬¾','è¶…å•†ç¹³æ¬¾','ç¬¬ä¸€éŠ€è¡Œè‡¨æ«ƒç¹³æ¬¾'] , correctIndex:0},
    { q: 'è‹±èªè‡ªå­¸ä¸­å¿ƒåœ¨å“ªè£¡?', o: ['ç¸½åœ–','ç®¡ç†å­¸é™¢','ç†å­¸é™¢','èˆŠåœ–'] , correctIndex:3},
    { q: 'è‹±èªè‡ªå­¸ä¸­å¿ƒè§€çœ‹è‹±æ–‡å½±ç‰‡å¹¾åˆ†é˜ä¸€å€‹æˆ³ç« ?', o: ['40åˆ†é˜','50åˆ†é˜','30åˆ†é˜','20åˆ†é˜'] , correctIndex:1},
    { q: 'æ ¡å…§å…¬ç”¨è…³è¸è»Šï¼Œä¿—ç¨±ã€Œå°ç¶ ã€ï¼Œå¯ä»¥ç§è‡ªä¸Šé–å—?', o: ['ä¸è¡Œ','å¯ä»¥','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:0},
    { q: 'å®¿èˆç¶²è·¯å•Ÿå‹•ç¢¼ç”Ÿæ•ˆæ™‚é–“æ˜¯ã€Œå®¿ç¶²ç³»çµ±è¨»å†Šå®Œç•¢å¾Œã€å¤šä¹…ç”Ÿæ•ˆ?', o: ['è¨»å†Šé¦¬ä¸Šç”Ÿæ•ˆ','é ˆç­‰ä¸€æ®µæ™‚é–“(24å°æ™‚å…§)','ä»¥ä¸Šçš†æ˜¯','ä»¥ä¸Šçš†é'] , correctIndex:1},
    { q: 'å®¿èˆç¶²è·¯æ¯ç­†çš„è¨»å†Šè³‡æ–™, å…è¨±æ›´æ› MAC Address(ç¶²è·¯å•Ÿå‹•ç¢¼)å¹¾æ¬¡?', o: ['1æ¬¡','2æ¬¡','3æ¬¡','5æ¬¡'] , correctIndex:2},
    { q: 'å®¿èˆç¶²è·¯å¦‚æœæ¬åˆ°å…¶ä»–å®¿èˆæˆ–å¯¢å®¤, å¯ä»¥ä¿®æ”¹å¹¾æ¬¡?', o: ['2æ¬¡','4æ¬¡','3æ¬¡','5æ¬¡'] , correctIndex:0},
    { q: '106å­¸å¹´åº¦æœå‹™å­¸ç¿’ç¸½å…±éœ€è¦å¹¾å€‹å°æ™‚æ‰èƒ½ç•¢æ¥­?', o: ['90å°æ™‚','100å°æ™‚','80å°æ™‚','70å°æ™‚'] , correctIndex:1},
    { q: '106å­¸å¹´åº¦æœå‹™å­¸ç¿’å…¶ä¸­è—æ–‡æ™‚æ•¸å å¤šå°‘å°æ™‚?', o: ['20å°æ™‚','30å°æ™‚','40å°æ™‚','50å°æ™‚'] , correctIndex:0},
    { q: 'èˆ‡ä¸­å¤®å¤§å­¸æœå‹™å­¸ç¿’ç›¸é—œè³‡è¨Šéœ€å»å“ªå€‹ç¶²ç«™æŸ¥çœ‹?', o: ['lms','portal','åœ‹éš›äº‹å‹™è™•','ä¸­å¤®å¤§å­¸æœå‹™å­¸ç¿’ç¶²'] , correctIndex:3},
];

// è¡€å°æ¿
function colorEgg() {
    var cutes = game.add.group()
    var yBasic =  game.camera.y - 40
    var x = 0, y = yBasic;
    for (let i = 0; i < 22; i++) {
        setTimeout(function() {
            if (i === 4 || i === 8) {
                y += 200
            } else if (i === 16) {
                y += 200
            }
            createCute(x, y)
            
            if (i < 3 || (i >= 8 && i < 12)) {
                x += 200
            } else if (i > 3 && i < 7) {
                x -= 200              
            } else if (i >= 12 && i < 15) {
                x += 200
            } else if (i > 15 && i < 18) {
                x -= 200
            } else if (i > 18 && i < 20) {
                x += 200
            } else if (i >= 20 && i < 21) {
                x -= 100
            }

            if (i === 12) {
                x = 100, y = yBasic + 100
            } else if (i === 18) {
                x = 200, y = yBasic + 200
            }

        }, (i *80))
    }

    function createCute(x, y) {
        // console.log("create cute " +"X:" + x + "Y: " + y)
        var cute = cutes.create(x, y, 'cute')
        cute.animations.add('jump')
        cute.play('jump', 15, true)
    }

    return cutes
}

// éŠæˆ²ä¸»é«”é•·å¯¬
var width = 800
var height = 600
var rankClick = 0
var bgMusic
var bgMusicFlag = 0
var bgMusicBack = 0
var game = new Phaser.Game(width, height, Phaser.CANVAS, 'game')
var states = {
    // åŠ è½½åœºæ™¯, è¼‰å…¥è³‡æº
    preload: function() {
        this.preload = function() {
            // é˜»æ­¢é»æ“ŠéŠæˆ²å€åŸŸå¤–åéŠæˆ²æš«åœ
            game.stage.disableVisibilityChange = true   
            // ç¦æ­¢æ‰‹æ©Ÿç‰ˆ
            if (!this.game.device.desktop == true) {
                setTimeout(function(){
                    alert('ã‚ã®ã­ã€ã‚ã®ã­ï¼Œè«‹åœ¨é›»è…¦ç«¯é«”é©—å°éŠæˆ²å–”å–”å–”~')
                    window.location.href = "/personal/"
                }, 0)
                game.kill()
            }

            game.state.backgroundColor = '#000000'
            // è¼‰å…¥è³‡æº
            game.load.image('bg', 'images/background.png')
            game.load.image('rankAlign', 'images/rank_align.png')
            game.load.image('rankBubble', 'images/rank_bubble.png')
            game.load.spritesheet('rankOne', 'images/rank_one_.png', 295, 67)
            game.load.spritesheet('rankAll', 'images/rank_all_.png', 295, 67)
            game.load.image('rankLeft', 'images/rank_left.png')
            game.load.image('rankStage', 'images/rank_stage.png')
            game.load.image('squirrel','images/squirrel_start.png' )
            game.load.image('dust', 'images/dust.png')
            game.load.image('btnStart', 'images/button_start.png')
            game.load.image('btnRank', 'images/button_rank.png')
            game.load.image('btnIntro', 'images/button_intro.png')
            game.load.spritesheet('btnChoice', 'images/button.png', 400, 40)
            game.load.image('bonus1', 'images/+1s.png')
            game.load.image('bonus2', 'images/+3s.png')
            game.load.image('bonus3', 'images/+7s.png')
            game.load.image('bonus4', 'images/+20s.png')
            game.load.image('combo', 'images/combo.png')
            game.load.spritesheet('squirrelGround', 'images/squirrel_ground.png', 220, 109)
            game.load.spritesheet('squirrelSky', 'images/squirrel_sky.png', 220, 133)
            game.load.image('gamerules', 'images/intro.png')
            game.load.image('remainTime', 'images/remaintime.png')
            game.load.image('scoreStage', 'images/score_stage.png')
            game.load.image('scoreRank', 'images/score_rank.png')
            game.load.image('scoreQuit', 'images/score_quit.png')
            game.load.image('scoreAgain', 'images/score_again.png')
            game.load.image('questionStage', 'images/question_stage.png')
            game.load.image('quit', 'images/quit.png')
            game.load.image('question', 'images/question.png')
            game.load.spritesheet('musicSwitch', 'images/music_swtich.png', 60, 60)
            game.load.spritesheet('btnBack', 'images/back.png', 60, 60)
            game.load.spritesheet('blank', 'images/blank.png', width, height)
            game.load.spritesheet('cute', 'images/cute/cute.png', 200, 213)
            game.load.audio('correct', 'sounds/correct.mp3')
            game.load.audio('wrong', 'sounds/wrong.mp3')
            game.load.audio('bgMusic', 'sounds/lovelyflower.mp3')
            
            // è¼‰å…¥é ­åƒ
            game.load.image('<%= user.id %>', '../personal/bighead/<%= user.avatar %>')
            <% var avatarName = 'image' %>
            <% for(let i = 0; i < result.length; i++) { %>
                game.load.image('<%= result[i].id %>', '../personal/bighead/<%= result[i].avatar %>')
            <% } %>

            // æ·»åŠ é€²åº¦æç¤º
            var progressText = game.add.text(game.world.centerX, game.world.centerY, '0%', {
                font: '60px myFont',
                fill: '#ffffff'
            })
            progressText.anchor.setTo(0.5, 0.5)
            game.load.onFileComplete.add(function(progress) {
                progressText.text = progress + '%'
            })
            game.load.onLoadComplete.add(onLoad)
            var deadLine = false
            setTimeout(function() {
                deadLine = true
            }, 800)

            function onLoad() {
                if (deadLine) {
                    game.state.start('main')
                } else {
                    setTimeout(onLoad, 500)
                }
            }
        }
    },
    
    // å¼€å§‹ç•Œé¢
    main: function() {
        this.create = function() {
            game.stage.disableVisibilityChange = true   
            // éŠæˆ²èƒŒæ™¯éŸ³æ¨‚
            if (bgMusicFlag !== 1 && !bgMusicBack) {
                bgMusic = game.add.audio('bgMusic', 1, true).play()
                bgMusicFlag = 1
            }

            // è¨­ç½®èƒŒæ™¯é‚Šç•Œ
            game.world.setBounds(0, 0, 800, 3910);

            // èƒŒæ™¯
            var bg = game.add.image(0, 0, 'bg')
            
            // éŸ³æ¨‚é—œé–‰
            if (bgMusicFlag !== 1) {
                var musicSwitch =  game.add.button(0, 0, 'musicSwitch', musicSwitch, 1, 1, 0, 1).alignIn(bg, Phaser.BOTTOM_RIGHT)
            } else {
                var musicSwitch =  game.add.button(0, 0, 'musicSwitch', musicSwitch, 0, 0, 1, 0).alignIn(bg, Phaser.BOTTOM_RIGHT)
            }

            // éŸ³æ¨‚é—œé–‰
            function musicSwitch() {
                if (bgMusicFlag !== 1) {
                    bgMusic = game.add.audio('bgMusic', 1, true).play()
                    bgMusicFlag = 1
                    bgMusicBack = 0
                    musicSwitch.setFrames(1)
                } else {
                    musicSwitch.setFrames(0)
                    bgMusicFlag = 0
                    bgMusicBack = 1
                    bgMusic.stop()
                }
            }

            // æ¾é¼ åœ–ç‰‡
            var squirrel = game.add.image(game.world.centerX - 200, game.world.centerY - 200, 'squirrel').alignIn(bg, Phaser.BOTTOM_CENTER, 0, -185)
            
            // éŠæˆ²ä»‹ç´¹åœ–ç‰‡
            var introduction = game.add.sprite(0, 0, 'gamerules').alignIn(bg, Phaser.BOTTOM_CENTER)
            introduction.visible = false
            var quit = game.add.button(0, 0, 'quit', buttonForIntroQuit).alignIn(bg, Phaser.BOTTOM_RIGHT, 0, -550)
            quit.visible = false
            
            // æŒ‰éˆ•
            var buttonStart
            var buttonRank
            var buttonIntro
            
            buttonStart = game.add.button(0, 0, 'btnStart', buttonForStart, this).alignTo(squirrel, Phaser.BOTTOM_CENTER, 0, -40)            
            buttonRank = game.add.button(0, 0, 'btnRank', buttonForRank, this).alignTo(buttonStart, Phaser.BOTTOM_CENTER, 0, 20)            
            buttonIntro = game.add.button(0, 0, 'btnIntro', buttonForIntro, this).alignTo(buttonRank, Phaser.BOTTOM_CENTER, 0, 20)            

            // æŒ‰éˆ•ç¶å®šäº‹ä»¶
            function buttonForStart() {
                game.state.start('start')
            }
            
            function buttonForRank() {
                game.state.start('rank')
            }
            
            function buttonForIntro() {
                introduction.visible = true
                mainUI.visible = false
                quit.visible = true
            }
        
            function buttonForIntroQuit() {
                introduction.visible = false
                mainUI.visible = true
                quit.visible = false
            }

            var mainUI = game.add.group()
            mainUI.add(squirrel)
            mainUI.add(buttonStart)
            mainUI.add(buttonRank)
            mainUI.add(buttonIntro)

            game.camera.focusOnXY(600, 3910)
        }
    },
    
    // éŠæˆ² play ç•Œé¢
    start: function() {
        this.create = function() {
            game.stage.disableVisibilityChange = true   
            var combo = 0
            var score = 0
            var remainTime = 60
            game.physics.startSystem(Phaser.Physics.P2JS)
            
            // è¨­ç½®èƒŒæ™¯é‚Šç•Œ
            game.world.setBounds(0, 0, 800, 3910);
            
            // èƒŒæ™¯
            var bg = game.add.image(0, 0, 'bg')
            bg.width = game.world.width     
            bg.height = game.world.height
            
            // é¡é ­å€åŸŸ
            var cameraFocus = game.add.sprite(game.world.centerX, game.world.centerY + 1700, 'blank')
            game.physics.p2.enable(cameraFocus)
            
            // éŸ³æ¨‚é—œé–‰æŒ‰éˆ•
            if (bgMusicFlag === 1) {
                var musicSwitch = game.add.button(0, 0, 'musicSwitch', musicSwitch, 0, 0, 1, 0).alignIn(cameraFocus, Phaser.BOTTOM_RIGHT, 0, -45)
            } else {
                var musicSwitch = game.add.button(0, 0, 'musicSwitch', musicSwitch, 1, 1, 0, 1).alignIn(cameraFocus, Phaser.BOTTOM_RIGHT, 0, -45)
            }

            // éŸ³æ¨‚é—œé–‰
            function musicSwitch() {
                if (bgMusicFlag !== 1) {
                    bgMusic = game.add.audio('bgMusic', 1, true).play()
                    bgMusicFlag = 1
                    bgMusicBack = 0
                    musicSwitch.setFrames(1)
                } else {
                    musicSwitch.setFrames(0)
                    bgMusic.stop()
                    bgMusicFlag = 0
                    bgMusicBack = 1
                }
                // console.log("bgMusicFlag: " + bgMusicFlag)
            }

            // è¿”å›æŒ‰éˆ•            
            var btnBack = game.add.button(0, 0, 'btnBack', btnBackClick).alignIn(cameraFocus, Phaser.TOP_RIGHT, -10, -10)
            
            // å•é¡Œ
            var questionStage = game.add.sprite(0, 0,'questionStage').alignIn(cameraFocus, Phaser.TOP_RIGHT, -10, -10)
            var questionSprite = new LabelSprite(this.game, game.world.centerX + 100, game.world.centerY - 130, 'question')
            
            // é¸æ“‡æŒ‰éˆ•
            var btnChoiceA = new LabelButton(false, this.game, game.world.centerX + 100, game.world.centerY -10, "btnChoice", "Choice A", inputDown, this) 
            var btnChoiceB = new LabelButton(false, this.game, game.world.centerX + 100, game.world.centerY + 50, "btnChoice", "Choice B", inputDown, this) 
            var btnChoiceC = new LabelButton(false, this.game, game.world.centerX + 100, game.world.centerY + 110, "btnChoice", "Choice C", inputDown, this) 
            var btnChoiceD = new LabelButton(false, this.game, game.world.centerX + 100, game.world.centerY + 170, "btnChoice", "Choice D", inputDown, this) 
            var btnChoices = [btnChoiceA, btnChoiceB, btnChoiceC, btnChoiceD]

            // æ·»åŠ  combo
            var comboSprite = game.add.image(0, 0, 'combo').alignTo(cameraFocus, Phaser.RIGHT_CENTER, -140, 40)
            var comboText = game.add.text(0, 0, '0', {font: "45px myFont"})
            comboText.anchor.setTo(0.5, 0.5)
            comboText.alignTo(comboSprite, Phaser.BOTTOM_CENTER)
            comboSprite.visible = false
            comboText.visible = false

            // å‰©é¤˜æ™‚é–“
            var remainTimeSprite = game.add.sprite(0, 0, 'remainTime').alignIn(cameraFocus, Phaser.TOP_RIGHT, -10, -100)
            var remainTimeText = game.add.text(0, 0, remainTime.toString(), {font: "45px myFont"})
            remainTimeText.anchor.setTo(0.5, 0.5)
            remainTimeText.alignTo(remainTimeSprite, Phaser.BOTTOM_CENTER, -10)
            
            var timer = game.time.create(false)
            timer.loop(1000, function() {
                remainTime--  
                remainTimeText.setText(remainTime.toString())
                // éŠæˆ²çµæŸ
                if (remainTime === 0) {
                    gameOver()
                    setScore(score);
                    timer.loop = false
                }
            }, this)
            timer.start()
            
            // ajax è«‹æ±‚ 
            function setScore(score) {
                $.ajax({
                    data: {score: score},
                    url: "/smallgame/setScore",
                    cache: false,
                    type: "post",
                    success: function(data) {
                        console.log(data)
                    },
                    error: function (err) {
                        console.log(err)
                    }
                })
            }

            function gameOver() {
                // æ›´æ–°åˆ†æ•¸
                scoreText.setText(score)

                scoreUI.visible = true
                scoreUI.alpha = 1
                otherUI.visible = false
                playUI.visible = false
                squirrelGroup.visible = false
                // æ·»åŠ éæ¸¡æ•ˆæœ
                game.add.tween(scoreUI).from({
                    alpha: 0
                },1000, Phaser.Easing.Linear.None, true, 0, 0, false);    
                game.add.tween(playUI).to({
                    alpha: 0
                },1000, Phaser.Easing.Linear.None, true, 0, 0, false);    
                game.add.tween(otherUI).to({
                    alpha: 0
                },1000, Phaser.Easing.Linear.None, true, 0, 0, false);    
                game.add.tween(squirrelGroup).to({
                    alpha: 0
                },1000, Phaser.Easing.Linear.None, true, 0, 0, false);    
            }
            
            // æ·»åŠ æ¾é¼ å‹•ç•«
            var squirrelGroup = game.add.group()
            var squirrelGroupX = 5
            var squirrelGroupY = 3230
            function createSquirrel(tempY) {
                // å¢œè½å‹•ç•«
                var fallAnimation = squirrelGroup.create(squirrelGroupX, game.camera.y - 220, 'squirrelSky', 0)
                fallAnimation.animations.add('falldown')
                fallAnimation.play('falldown', 15, true)
                
                // å¢œè½æ•ˆæœ
                var fallTween = game.add.tween(fallAnimation).to({y: tempY + 550}, 2500, Phaser.Easing.Exponential.In, true)
                fallTween.onComplete.add(function() {
                    // éš¨æ©Ÿæ¾é¼ è½åœ°åœ–
                    var groundAnimation = squirrelGroup.create(squirrelGroupX, tempY + 600, 'squirrelGround', 0)
                    var random = Math.floor(Math.random() * 3)
                    groundAnimation.frame = random
                    // ç°å¡µç‰¹æ•ˆ
                    var dust = squirrelGroup.create(squirrelGroupX - 50, tempY + 630, 'dust')
                    dust.alpha = 0
                    var dustTween1 = game.add.tween(dust).from({alpha: 1}, 1000, Phaser.Easing.Exponential.In, true)
                    game.add.tween(dust.scale).to({x: 1.5, y: 1.5}, 2000, Phaser.Easing.Linear.None, true)
                    dustTween1.onComplete.add(function() {
                        var dustTween2 = game.add.tween(dust).to({alpha: 0}, 1200, Phaser.Easing.Exponential.In, true)
                        dustTween2.onComplete.add(function() {
                            dust.kill()
                        })
                    })
                    
                    fallAnimation.kill()
                })
            }
            
            // æ·»åŠ çå‹µåœ–ç‰‡
            var bonus1 = game.add.image(0, 0, 'bonus1');
            var bonus2 = game.add.image(0, 0, 'bonus2');
            var bonus3 = game.add.image(0, 0, 'bonus3');
            var bonus4 = game.add.image(0, 0, 'bonus4');

            // æ·»åŠ çµç®—ç•Œé¢
            var scoreStage = game.add.image(0, 0, 'scoreStage').alignIn(cameraFocus, Phaser.CENTER, 0, -60)
            scoreStage.bringToTop()
            var scoreRank = game.add.button(0, 0, 'scoreRank', scoreRankClick).alignIn(scoreStage, Phaser.CENTER, 120, 131)
            var scoreQuit = game.add.button(0, 0, 'scoreQuit', scoreQuitClick).alignIn(scoreStage, Phaser.CENTER, -140, 130)
            var scoreAgain = game.add.button(0, 0, 'scoreAgain', scoreAgainClick).alignIn(scoreStage, Phaser.TOP_RIGHT, -50, -50)
            var scoreText = game.add.text(0, 0, '0' ,{
                font: "50px myFont",
            })
            scoreText.anchor.setTo(0.5, 0.5)
            scoreText.alignIn(scoreStage, Phaser.CENTER)
            
            function scoreAgainClick() {
                game.state.start('start')
            }
            
            function scoreQuitClick() {
                game.state.start('main')
            }
            
            function scoreRankClick() {
                game.state.start('rank')
            }
            
            // é¸æ“‡ bonus
            function choiceBonus(combo) {
                if (combo == 5) {
                    remainTime += 2
                    return "bonus1"
                } else if (combo == 10) {
                    remainTime += 4
                    return "bonus2"
                } else if (combo == 20) {
                    remainTime += 8
                    return "bonus3"
                } else if (combo == 50) {
                    remainTime += 21
                    return "bonus4"
                } else {
                    return false
                }
            }
            
            // å»ºç«‹ group
            var otherUI = game.add.group()
            otherUI.add(questionStage)
            otherUI.add(btnBack)
            otherUI.add(comboSprite)
            otherUI.add(comboText)
            otherUI.add(remainTimeSprite)
            otherUI.add(remainTimeText)
            otherUI.add(bonus1)
            otherUI.add(bonus2)
            otherUI.add(bonus3)
            otherUI.add(bonus4)
            otherUI.add(musicSwitch)
            
            var playUI = game.add.group()
            playUI.add(btnChoiceD)
            playUI.add(btnChoiceC)
            playUI.add(btnChoiceB)
            playUI.add(btnChoiceA)
            playUI.add(questionSprite)
            playUI.alignIn(bg, Phaser.BOTTOM_CENTER, 45)
            playUI.y -= 100
            
            var scoreUI = game.add.group()
            scoreUI.add(scoreStage)
            scoreUI.add(scoreQuit)
            scoreUI.add(scoreRank)
            scoreUI.add(scoreAgain)
            scoreUI.add(scoreText)
            scoreUI.visible = false

            // é¡é ­ç§»å‹•åˆ°æœ€åº•éƒ¨
            game.camera.focusOnXY(600, 3910)
            
            // æ‰“äº‚é †åºï¼Œæ¯æ¬¡é¡Œç›®ä¸åŒ
            var data = quiz.shuffle()
            var count = 0
            var choiceState = 0
            
            // åˆ·æ–°é¡Œç›®
            function resetQuestionAndChoice(data, item = undefined) {
                // é‡ç½®é¸é …é¡è‰²
                for (i = 0, len = btnChoices.length; i < len; i++) {
                    btnChoices[i].frame = 0
                }

                choiceState = 0
                // ç²å– data ä¸­çš„é¡Œç›®
                questionSprite.setLabel(data.q)
                // ä¸­æ–‡æ›è¡Œè™•ç†
                formatChinese(questionSprite.label, questionSprite)
                choices = [btnChoiceA, btnChoiceB, btnChoiceC, btnChoiceD]
                // console.log("correctIndex:" + data.correctIndex)
                // è¨­å®šæ­£ç¢ºé¸æ“‡
                for (i = 0; i < choices.length; i++) {
                    choices[i].setLabel(data.o[i])
                    if (i == data.correctIndex) {
                        choices[i].setRightOrWrong(true)
                    } else {
                        choices[i].setRightOrWrong(false)
                    }
                }
            }

            function addQuake() {
                var quake = game.add.tween(game.camera).to({ x: game.camera.x - 100}, 1000, Phaser.Easing.Bounce.InOut, true, 1000, 4, true);
            }

            // æŒ‰ä¸‹æŒ‰éˆ• event 
            function inputDown(item) {
                // choiceState åˆ¤æ–·ä¸€æ¬¡ç­”é¡Œæ˜¯å¦é»æ“Šå¤šæ¬¡
                if (!choiceState) {
                    count++
                    // console.log("count:" + count)
                    // å½©è›‹è§¸ç™¼ 
                    if (count >= 100) {
                        var a = colorEgg()
                        setTimeout(function() {
                            alert("å°‘ä¿ å¥½åŠŸå¤«ï¼Œæ­£å¸¸äººæ˜¯ç©ä¸åˆ°é€™è£¡çš„XD")
                            a.kill()
                            gameOver()
                        }, 3000)
                    }
                    choiceState = 1
                    // é¸æ“‡æ­£ç¢º
                    if (item.rightOrWrong === true) {
                        // éŸ³æ¨‚
                        game.add.audio('correct', 1).play()
                        // æ·»åŠ æ¾é¼ ä¸€éš»
                        squirrelGroupY -= 40
                        createSquirrel(squirrelGroupY)
                        // åŠ åˆ†, combo
                        score += 100
                        combo++
                        var goal = choiceBonus(combo)
                        // é¸é …é¡è‰²åé¥‹, è®Šç¶ 
                        item.frame = 2                    
                        
                        // é¡¯ç¤º bonus æ•ˆæœ
                        if (goal) {
                            var bonus = game.add.image(game.camera.x + 655, game.camera.y + 270, goal)
                            bonus.alpha = 0
                            // æ·»åŠ éæ¸¡æ•ˆæœ
                            var showTween = game.add.tween(bonus).to({
                                alpha: 1,
                                y: bonus.y - 20
                            }, 500, Phaser.Easing.Linear.None, true, 0, 0, false);
                            showTween.onComplete.add(function () {
                                game.add.tween(bonus).to({
                                    alpha: 0,
                                    y: bonus.y - 20
                                }, 500, Phaser.Easing.Linear.None, true, 200, 0, false);
                            });        
                        }
                        
                        // ä½¿ç”¨ tween ç§»å‹•é¡é ­
                        if (squirrelGroupY <= 3020 && game.camera.y >= 40) {
                            game.add.tween(playUI).to({y: playUI.y - 40}, 1000, Phaser.Easing.Bounce.Out, true)
                            game.add.tween(otherUI).to({y: otherUI.y - 40}, 1000, Phaser.Easing.Bounce.Out, true)
                            game.add.tween(scoreUI).to({y: scoreUI.y - 40}, 1000, Phaser.Easing.Bounce.Out, true)         
                            game.add.tween(game.camera).to({y: game.camera.y - 40}, 500, Phaser.Easing.Linear.None, true)
                        } 
                        setTimeout(resetQuestionAndChoice, 500, data[count], item)
                    } else {
                        // éŸ³æ¨‚
                        game.add.audio('wrong', 1).play()

                        combo = 0
                        item.frame = 1
                        // å±å¹•æŠ–å‹•æ•ˆæœ
                        game.add.tween(game.camera).to({ y: game.camera.y - 5}, 50, Phaser.Easing.Bounce.InOut, true, 100, 4, true);
                        for (i = 0, len = btnChoices.length; i < len; i++) {
                            if (btnChoices[i].rightOrWrong) {
                                btnChoices[i].frame = 2
                            }
                        }
                        setTimeout(resetQuestionAndChoice, 1500, data[count], item)
                    } 
                }
                
                // æ›´æ–° combo é¡¯ç¤º
                comboText.setText(combo.toString())
                if (combo == 0) {
                    comboSprite.visible = false
                    comboText.visible = false
                } else {
                    comboSprite.visible = true
                    comboText.visible = true
                }
            }
            
            // ç¬¬ä¸€æ¬¡åˆ·æ–°é¡Œç›®
            resetQuestionAndChoice(data[count])
            // colorEgg()
        }
    },
    
    rank: function () {
        this.create = function() {
            game.stage.disableVisibilityChange = true   
            var rank = game.add.image(game.camera.x, game.camera.y, 'rankStage')
            var alignLineY = 117
            var rankLeftImage = game.add.group()
            var alignLine = game.add.group()
            var rankLeft = game.add.group()
            var rankLeftSprite = rankLeftImage.create(0, 0, 'rankLeft').alignIn(rank, Phaser.LEFT_CENTER, 0, 70)
            rankLeftSprite.alpha = 0
            // é€€å‡ºæŒ‰éˆ•
            var quit = game.add.button(0, 0, 'quit', quitRankClick).alignIn(rank, Phaser.TOP_RIGHT)
            
            // å³é‚Šæ°£æ³¡
            function createBubble(data, type) {
                var style = {
                    'font': 'Microsoft Yahei',
                    'fontSize': '25px'
                }
                var styleNum = {
                    'font': 'myFont',
                    'fontSize': '25px'
                }
                // å·¦é‚Šé ˜çå°
                rankLeft.classType = Phaser.Text
                rankLeft.create(0, 0, data[0].name, style).alignTo(rankLeftSprite, Phaser.BOTTOM_CENTER, -3)
                rankLeft.create(0, 0, data[1].name, style).alignTo(rankLeftSprite, Phaser.BOTTOM_CENTER, 80)
                rankLeft.create(0, 0, data[2].name, style).alignTo(rankLeftSprite, Phaser.BOTTOM_CENTER, -85)
                
                if (type === 'sum') {
                    rankLeft.create(0, 0, data[0].score_sum, styleNum).alignTo(rankLeftSprite, Phaser.TOP_CENTER, -5, -20);
                    rankLeft.create(0, 0, data[1].score_sum, styleNum).alignTo(rankLeftSprite, Phaser.TOP_CENTER, 80, -80);
                    rankLeft.create(0, 0, data[2].score_sum, styleNum).alignTo(rankLeftSprite, Phaser.TOP_CENTER, -90, -105);
                } else {
                    rankLeft.create(0, 0, data[0].score_high, styleNum).alignTo(rankLeftSprite, Phaser.TOP_CENTER, -5, -20);
                    rankLeft.create(0, 0, data[1].score_high, styleNum).alignTo(rankLeftSprite, Phaser.TOP_CENTER, 80, -80);
                    rankLeft.create(0, 0, data[2].score_high, styleNum).alignTo(rankLeftSprite, Phaser.TOP_CENTER, -90, -105);
                }
                
                rankLeft.setAll('alpha', 1);
                game.add.tween(rankLeftImage).from({alpha: 0}, 800, Phaser.Easing.Exponential.In, true)                                
                
                game.add.tween(rankLeft).from({alpha: 0}, 1500, Phaser.Easing.Exponential.In, true)            
         
                var bubbleLength
                if (data.length > 10) {
                    bubbleLength = 10
                } else {
                    bubbleLength = data.length
                }
                // å³é‚Šå‹•ç•«
                for(let i = 3; i < bubbleLength; i++) {
                    setTimeout(function () {
                        var rankLine = game.add.group()
                        var rankBubble = alignLine.create(415, alignLineY, 'rankBubble');
                        // var rankBubble = game.add.sprite(415, alignLineY, 'rankBubble');
                        var scoreText = game.add.text(0, 0, 'åˆ†æ•¸: ', style).alignTo(rankSum, Phaser.BOTTOM_RIGHT, -80, alignLineY - 85);
                        if (type === 'sum') {
                            var scoreShow = game.add.text(0, 0, data[i].score_sum, styleNum).alignTo(scoreText, Phaser.RIGHT_CENTER);
                        } else {
                            var scoreShow = game.add.text(0, 0, data[i].score_high, styleNum).alignTo(scoreText, Phaser.RIGHT_CENTER);
                        }
                        var nth = game.add.text(0, 0, i + 1 + 'th', styleNum).alignTo(scoreText, Phaser.LEFT_CENTER, 135);
                        var textName = game.add.text(0, 0, data[i].name, style).alignTo(nth, Phaser.RIGHT_CENTER, 10);
                        
                        rankLine.add(scoreText);
                        rankLine.add(scoreShow);
                        rankLine.add(nth);
                        rankLine.add(textName);
                        rankLine.setAll('alpha', 1);
                        alignLine.add(rankBubble)
                        
                        game.add.tween(rankLine).from({alpha: 0}, 1500, Phaser.Easing.Exponential.In, true);    
                        game.add.tween(rankBubble).from({alpha: 0}, 1500, Phaser.Easing.Exponential.In, true);
                        alignLineY += 68.5;
                    },  i * 200)
                }
            }
            
            function getScore(type) {
                $.ajax({
                    data: {type: type},
                    url: "/smallgame/getScore",
                    dataType: 'text',
                    cache: false,
                    type: "get",
                    success: function(data) {
                        var inputData = JSON.parse(data)

                        // éš±è—ä¸­é–“å§“å
                        for (let i = 0; i < inputData.length; i++) {
                            var str = inputData[i].name
                            if (str == null) {
                                inputData[i].name = '107 æ–°ç”Ÿ'
                            } else {
                                inputData[i].name = str.substr(0,1) + 'O' + str.substr(str.length-1,1)
                            }
                        }

                        if (type === 'sum') {
                            createBubble(inputData, 'sum')
                        } else {
                            createBubble(inputData, 'high')
                        }
                        // é¡¯ç¤ºé ­åƒ
                        var no1 = rankLeftImage.create(0, 0, JSON.parse(data)[0].id)
                        // no1.width = 50
                        // no1.height = 50
                        no1.alignTo(rankLeftSprite, Phaser.TOP_CENTER, -5, 20)

                        var no2 = rankLeftImage.create(0, 0, JSON.parse(data)[1].id)
                        // no2.width = 50
                        // no2.height = 50
                        no2.alignTo(rankLeftSprite, Phaser.TOP_CENTER, 80, -40)

                        var no3 = rankLeftImage.create(0, 0, JSON.parse(data)[2].id)
                        // no3.width = 50
                        // no3.height = 50
                        no3.alignTo(rankLeftSprite, Phaser.TOP_CENTER, -90, -65)

                        rankLeftImage.setAll('alpha', 1);
                    },
                    error: function (err) {
                        console.log(err)
                    }
                })
            }
            
            function quitRankClick() {
                game.state.start('main')
            }
            
            function rankHighClick() {
                rankClick = 0
                game.state.start('rank')
            }
            
            function rankSumOnclick() {
                rankClick = 1
                game.state.start('rank')
            }
            
            // åˆ¤æ–·é€²å…¥ rank ç•Œé¢ä¹‹å¾Œé¡¯ç¤ºå–®æ¬¡é‚„æ˜¯ç´¯è¨ˆ rank
            var rankHigh
            var rankSum
            if (rankClick === 1) {
                rankHigh = game.add.button(0, 0, 'rankOne', rankHighClick, this, 1, 2, 0, 0).alignIn(rank, Phaser.TOP_CENTER, -190, -30)
                rankSum = game.add.button(0, 0, 'rankAll', rankSumOnclick, this, 2, 2, 2, 2).alignIn(rank, Phaser.TOP_CENTER, 200, -30)    
                getScore('sum')
            } else {
                rankHigh = game.add.button(0, 0, 'rankOne', rankHighClick, this, 0, 0, 0, 0).alignIn(rank, Phaser.TOP_CENTER, -190, -30)
                rankSum = game.add.button(0, 0, 'rankAll', rankSumOnclick, this, 0, 1, 2, 2).alignIn(rank, Phaser.TOP_CENTER, 200, -30)    
                getScore('high')
            }
        }
    }
}

// æ·»åŠ å ´æ™¯åˆ°éŠæˆ²ä¸­
Object.keys(states).map(function(key) {
    game.state.add(key, states[key])
})

// å•Ÿå‹•éŠæˆ²
game.state.start('preload')

</script>
