<script>
    new fullpage('#fullpage', {
        licenseKey: "OPEN-SOURCE-GPLV3-LICENSE",
        autoScrolling:true,
        scrollHorizontally: true,
        // verticalCentered: false,
        scrollBar: true,
        anchors:['Carousel', 'news-Q&A', 'timeline']
    });

    //methods
    fullpage_api.setAllowScrolling(false);

    var news_page = function(){
        document.getElementById('one').style.removeProperty( 'display' );
        document.getElementById('two').style.display = 'none';
        document.getElementById("news-halo").classList.add("active");
        document.getElementById("qna-halo").classList.remove("active");
    }

    var qna_page = function(){
        document.getElementById('one').style.display = 'none';
        document.getElementById('two').style.removeProperty( 'display' );
        document.getElementById("news-halo").classList.remove("active");
        document.getElementById("qna-halo").classList.add("active");
    }

    var getWeekNumber = function(d){
        // Copy date so don't modify original
        d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
        // Set to nearest Thursday: current date + 4 - current day number
        // Make Sunday's day number 7
        d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));
        // Get first day of year
        var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
        // Calculate full weeks to nearest Thursday
        var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);
        // Return array of year and week number
        return [d.getUTCFullYear(), weekNo];
    }
    

    var schedule = JSON.parse('<%- schedule %>');
    for (let i = 0;i<schedule.length;i++){
        var weekYaer = getWeekNumber(new Date(schedule[i].time));
        schedule[i].year = weekYaer[0];
        schedule[i].week = weekYaer[1];
    }
    schedule.sort(function(a, b){return a.week-b.week}).sort(function(a, b){return a.year-b.year});
    console.log(schedule)
</script>