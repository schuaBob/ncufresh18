<script>

    $(document).ready(function () {

        CKEDITOR.replace('add_text', {
            width: 800,
            filebrowserUploadUrl: '/uploader',
        });

        //大學生研究生的動畫
        $(".under").mousedown(function () {
            $(".under").removeClass("small").addClass("big");
            $(".gra").removeClass("big").addClass("small");
        });
        $(".under").mouseover(function () {
            $(".gra").removeClass("big").addClass("small");
        });
        $(".gra").mouseover(function () {
            $(".under").removeClass("big").addClass("small");
        });
        $(".gra").mousedown(function () {
            $(".gra").removeClass("small").addClass("big");
            $(".under").removeClass("big").addClass("small");
        });


        //編輯者
        $(".box").mousedown(function () {
            
            //抓按下按鈕的id
            let count = 0;
            let textid = this.id;
            $("#edit").modal("show");

            //將js的變數給html裡的form action
            $('#add').attr('action', "/documents/edit/" + textid);

            $.ajax({
                url: "/documents/require_data/" + textid,
                method: 'get',
                error: function (err) {
                    console.log(err);
                },
                success: function (data) {
                    
                    $("#edit_title").val(data.title);
                    CKEDITOR.instances.edit_content.setData(data.content);
                }
            });
        });

        //使用者
        $(".room").mousedown(function () {

            let count = 0;
            let textid = this.id;
            $("#show").modal("show");

            $.ajax({
                url: "/documents/require_data/" + textid,
                method: 'get',
                error: function (err) {
                    console.log(err);
                },
                success: function (data) {

                    $("#show_title").html(data.title);
                    $("#show_content").html(data.content);

                }
            });
        });

        //預設為大學生
        $(".graduate").hide();
        $(".undergraduate").show();
        
        //大學生研究生選擇
        $(".gra").mousedown(function () {

            $(".graduate").show();
            $(".undergraduate").hide();

        });
        $(".under").mousedown(function () {
            $(".graduate").hide();
            $(".undergraduate").show();
        });
       
        
        $("#t_close").show();
        $("#o_close").show();
        $("#b_close").hide();

        $(window).resize(function(){
            
             let x= $(window).width();
     
             if(x>768){
                 $("#t_close").show();
                 $("#o_close").show();
                 $("#b_close").hide();
             }
             else{
                 $("#t_close").hide();
                 $("#o_close").hide();
                 $("#b_close").show();
             }
        })

         $("#b_close").posfixed({  
        distance:0,  
        pos:"top",  
        type:"while",  
        hide:false  
    }); 
        /*處理ckeditor與model相容的問題，之後發現刪除tabindex="-1"也可
        $('.modal').removeAttr('tabindex');

        $('.modal').focusout(function(){
            $(this).css({'position':'relative'});
        });

        $('.modal').focusin(function(){
            $(this).css({'position':'fixed'});
        }); */





    })


</script>