
<script>
    //載入IFrame Player API code
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var x, n=0, nx=0, rotINT, rotate = 0, end = 1;
    //var player;
    //function onYouTubeIframeAPIReady() {player = new YT.Player('playser');}
    //初始影片
    
    //let aaa = JSON.parse(<%= %>);
        let ppp = Object();
        function onYouTubeIframeAPIReady() {//此函數在IFrame Player API code 載入後將自動呼叫
            $(".player").each(function(){
                console.log(this.id);
                console.log($(this));
                let id=this.id;
                ppp[id] = new YT.Player(id, {
                    height: '390',
                    width: '640',
                    videoId: id, //Youtube ID
                });
            })
        }
    
     
    

    $(document).ready(() => {
        $(document).on("click",".rotate",function(event){
            if(end == 1){
                if(rotate == 0){
                    $('.rotate').html('影片');
                    //player.pauseVideo();
                    
                    rotate = 1;
                }
                else{
                    $('.rotate').html('簡介');
                    
                    rotate = 0;
                }
                rotateDIV()
            }
            
            //按介紹時暫停
            /*$('.CDplayer').each(function(){
                if(rotate == 0){
                    $(this).stopVideo();
                }
            });*/
        })

        $(document).on("click",".turn",function(event){
            if(rotate==1){
                $('.rotate').html('簡介');
                rotate = 0;
                rotateDIV()
            }
        })

        

        $(document).on("click",".longvideo",function(event){
            $("#CDbox").css('background-image', 'url("test_background_longvideo.png")');
            
            //$('.rotate').css("display", "none");
            $('.sbtn').css("display", "none");
            $('.video_item_longvideo').css("display", "block");

            $(document).on("click",".video_item_longvideo",function(event){
                /**/$("#"+$(this).attr("ytID")).css("display", "block");
            })
            
        })
        $(document).on("click",".lifevideo",function(event){
            $("#CDbox").css('background-image', 'url("test_background_lifevideo.png")');

            //$('.rotate').css("display", "none");
            $('.sbtn').css("display", "none");
            $('.video_item_lifevideo').css("display", "block");


            $(document).on("click",".video_item_lifevideo",function(event){
                
            })
            

            
        })

        

        $(document).on("click",".QAvideo", function(event){
            $("#CDbox").css('background-image', 'url("test_background_QAvideo.png")');
            
            //$('.rotate').css("display", "none");
            $('.sbtn').css("display", "none");
            $('.video_item_QAvideo').css("display", "block");

            $(document).on("click",".video_item_QAvideo",function(event){
                $('.sbtn').css("display", "none");
                $(".video_item_QAvideo_"+ $(this).attr('college')).css("display", "block");
                
                
                $(document).on("click","'.video_item_QAvideo_"+ $(this).attr('college')+"'",function(event){
                    
                })
            })
            
        })

        $(document).on("click",".ssbtn",function(event){
            $('.rotate').css('display', "block");
            $(iframe).css("display", "none");
            $("#"+ $(this).attr('ytID')).css("display", "block");
            $(".picture").css("display", "none");
            $("."+ $(this).attr('ytID')).css("display", "block");
                
        })
    })


    $('#myModal').on('shown.bs.modal', function () {
        $('#myInput').trigger('focus')
    })
        
    
    function rotateDIV()
    {
        x=document.getElementById("CDbox")
        clearInterval(rotINT)
        rotINT=setInterval("startRotate()",10)
    }
        
    function startRotate()
    {
        end = 0;
        nx=nx+2.5
        x.style.transform="rotateX(" + nx + "deg)"
        x.style.webkitTransform="rotateX(" + nx + "deg)"
        x.style.OTransform="rotateX(" + nx + "deg)"
        x.style.MozTransform="rotateX(" + nx + "deg)"
        if(nx == 90){
            $('.CDplayer').css("display", "none");
            $('.CDpicture').css("display", "block");
            
        }
        else if(nx == 270){
            $('.CDplayer').css("display", "block");
            $('.CDpicture').css("display", "none");
            
        }
        if (nx==180 || nx>=360)
        {
            clearInterval(rotINT)
            if (nx>=360){
                nx=0
            }
            end = 1;
        }
    }

    

    
       
</script>
